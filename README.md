# Ozozo
Проект для программирования Ozo-ботов (далее озоботов) в соответствии с инструкциями log-файлов алгоритма AA-SIPP-m
## Класс OzoBot
### Поля класса
Класс OzoBot позволяет хранить информацию об отдельном озоботе:
- `int Sx` - координата X начальной позиции
- `int Sy` - координата Y начальной позиции
- `int Shead` - угловой поворот в стартовой позиции (0 - вдоль оси Ox, увеличивается против часовой стрелки)
- `int Gx` - координата X целевой позиции
- `int Gy` - координата Y целевой позиции
- `int Shead` - угловой поворот в стартовой позиции
- `int moveSpeed` - скорость движения озобота в мм/сек
- `int rotateSpeed` - скорость поворота озобота на месте в мм/сек
- `OzoColor color` - цвет подсветки верхнего и крайних передних светодиодов озобота в виде структуры OzoColor
- `string compiledColorCode` - строка `string` из обозначений цветов для программиррования озобота
### Конструктор класса
Класс имеет конструктор:
```
OzoBot(int Sx, int Sy, int Shead, int Gx, int Gy, int Ghead, int moveSpeed, int rotateSpeed, OzoColor color)
```
В него передаются данные всех полей в том же порядке, за исключением последнего - `string compiledColorCode`, его вызов без аргументов вернет экземпляр, все поля которого будут нулевыми, но их можно изменить позже т.к. они публичные

Последним аргументом коструктора является экземпляр структуры `OzoColor`, содержащий три поля (`r`, `g` и `b`) целых чисел в диапазоне [0..127], описывающих RGB цвет, ее пустой конструктор вернет случайный цвет
### Методы класса
Класс OzoBot имеет два ключевых метода:
```
void appendSection(int type, int parameter)
```
  Добавляет секцию движения озобота к уже существующей последовательности алгоритма
  
  В первый аргумент type передается одна из констант описанных в файле OzoBot.h:
  
  1)`OzoStay` - заставляет озобота стоять на месте, не двигаясь время в сотых долях секунды, переданное в parameter
  2)`OzoMove` - заставляет озобота передвинутся на расстоние в мм, переданное в parameter, со скоростью moveSpeed
  3)`OzoRotate` - заставляет озобота повернутся на угол в градусах, переданный в parameter, со скоростью rotateSpeed (положительный угол повернет озобота против часовой стрелки, отрицательный - по часовой)
```
string compColorCode()
```
  Компилирует и **обнуляет** запомненную последовательность алгоритма движения озобота в строку string (возвращая ее и записывая в `compiledColorCode`), каждый символ которой представляет собой обозначение цвета:
  * `'K'` - `#000000` - черный цвет
  * `'R'` - `#FF0000` - красный цвет
  * `'G'` - `#00FF00` - зеленый цвет
  * `'Y'` - `#FFFF00` - желтый цвет
  * `'B'` - `#0000FF` - синий цвет
  * `'M'` - `#FF00FF` - фиолетовый цвет (маджента)
  * `'C'` - `#00FFFF` - голубой цвет
  * `'W'` - `#FFFFFF` - белый цвет

  Для программирования озобота эти цвета должны быть транслированы с частотой 20Гц (смена кадров каждые 50мс)
## Класс LogXMLParser
### Поля класса
Класс LogXMLParser (на базе библиотеки PUGIXML) позволяет прочесть информацию из файла логов и хранить ее:
- `int gridWidth` - ширина сетки (количество полей по горизонтали)
- `int gridHeight` - высота сетки (количество полей по вертикали)
- `int cellSide` - длина стороны клетки в мм (читается из root->map->grid параметра cell, если он отсутствует, то определяется как 0)
- `vector<vector<bool>> grid` - матрица проходимости полей (true - проходимое поле, false - препятствие)
- `vector<OzoBot> ozobots` - массив экземпляров класса OzoBot
- `xml_document* doc` - указатель на xml документ
### Конструктор класса
Класс имеет конструктор:
```
LogXMLParser(const char* xmlFileName)
```
В него передается один аргумент - строка, содержащая путь к файлу логов

После создания экземпляра класса LogXMLParser определяются все его поля кроме ozobots, включая cellSide для проверки, равно ли оно 0
### Методы класса
```
void compileAgents()
```
  Заполняет поле ozobots информацией об агентах/озоботах согласно файлу логов и компилирует их
  
  Перед вызовом этого метода следует проверить определено ли поле cellSide
## Класс GridWindow
### Конструктор класса
Класс GridWindow (на базе библиотеки SFML) имеет только пустой конструктор, вызов которого является запуском программы чтения и программирования озоботов:
```
GridWindow()
```
Создает графическое окно, изначально представляющее окружность для калибровки озоботов (диаметром 40мм)

Взаимодествовать с программой можно нажатием клавиш клавиатуры:
- `O` - открывает окно проводника для выбора xml файла логов, при выборе которого создается окно представляющее сетку, с препятствиями и местами программирования и старта движения озоботов
- `Enter` - программирует озоботов в соответствии с выбранным файлом логов
- `Space` - осуществляет старт движения озоботов, затемняя поле на короткое время
- `Esc` - выход из программы
